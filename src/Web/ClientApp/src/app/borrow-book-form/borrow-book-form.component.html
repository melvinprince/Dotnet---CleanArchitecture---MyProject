<div class="container py-4">
  <h2>Borrow a Book</h2>

  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border"></div>
  </div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
  <div *ngIf="success" class="alert alert-success">
    Book borrowed successfully!
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf="!loading && !success">
    <div class="form-group">
      <label for="book">Book</label>
      <select id="book" class="form-control" formControlName="bookId">
        <option value="" disabled>Select a book</option>
        <option *ngFor="let b of books" [value]="b.id">{{ b.title }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="borrower">User Email</label>
      <select id="borrower" class="form-control" formControlName="borrowerId">
        <option value="" disabled>Select a borrower</option>
        <option *ngFor="let br of borrowers" [value]="br.id">
          {{ br.email }}
        </option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
      Submit
    </button>
  </form>
</div>
